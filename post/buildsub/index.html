<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script>
      if(('standalone' in window.navigator)&&window.navigator.standalone){
              var noddy,remotes=false;
              document.addEventListener('click',function(event){
                      noddy=event.target;
                      while(noddy.nodeName!=='A'&&noddy.nodeName!=='HTML') noddy=noddy.parentNode;
                      if('href' in noddy&&noddy.href.indexOf('http')!==-1&&(noddy.href.indexOf(document.location.host)!==-1||remotes)){
                              event.preventDefault();
                              document.location.href=noddy.href;
                      }
              },false);
      }
      </script>
    <link rel="apple-touch-icon" href="/images/hentai.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/hentai.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/hentai.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/hentai.png">  
    
    
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://luvsia.com/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://luvsia.com/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://luvsia.com/css/github.min.css' />
    <link rel="stylesheet" href='https://luvsia.com/css/github-style.css' />
    <link rel="stylesheet" href='https://luvsia.com/css/light.css' />
    <link rel="stylesheet" href='https://luvsia.com/css/dark.css' />
    <link rel="stylesheet" href='https://luvsia.com/css/syntax.css' />
    <title>搭建属于自己的订阅转换链接 - Ventus&#39; blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/%e5%9c%86%e5%bd%a2pink.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="CLASH订阅转换搭建实战" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://luvsia.com/post/buildsub/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="搭建属于自己的订阅转换链接 - Ventus&#39; blog" />
<meta name="twitter:description"
  content="CLASH订阅转换搭建实战" />
<meta name="twitter:site" content="https://luvsia.com" />
<meta name="twitter:creator" content="Ventus" />
<meta name="twitter:image"
  content="https://luvsia.com/images/1993/titties_circle.png">


<meta property="og:type" content="article" />
<meta property="og:title" content="搭建属于自己的订阅转换链接 - Ventus&#39; blog">
<meta property="og:description"
  content="CLASH订阅转换搭建实战" />
<meta property="og:url" content="https://luvsia.com/post/buildsub/" />
<meta property="og:site_name" content="搭建属于自己的订阅转换链接" />
<meta property="og:image"
  content="https://luvsia.com/images/1993/titties_circle.png">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2023-02-07 17:30:00 &#43;0800 &#43;0800" />













<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-5TXP17WLF8', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




<link rel="stylesheet" href="/highlight/agate.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<div id="aplayerContent">
<script src="/live2d/autoload.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
</div>


<script type="text/javascript">!function(e,t,a){function n(){c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)}function o(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement("div");a.className="heart",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function s(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);</script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css">



<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script>
  $(document).ready(function() {
    $(document).pjax('a[target!=_blank]', '#pageContent', {fragment: '#pageContent'});
  });
</script>
</head>
<base target="_blank">

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://luvsia.com">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://luvsia.com">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://luvsia.com">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  <div id="pageContent">
    
  
<div id="pageContent">
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://luvsia.com">
                  <img class=" avatar-user"
                    src="https://luvsia.com/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://luvsia.com">ventus</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://luvsia.com/post/buildsub/">搭建属于自己的订阅转换链接</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Tue, 07 Feb 2023 17:30:00 &#43;0800"
                    class="no-wrap">
                    Tue, 07 Feb 2023 17:30:00 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Tue, 01 Aug 2023 07:02:07 &#43;0000"
                    class="no-wrap">
                    Tue, 01 Aug 2023 07:02:07 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1594 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/server">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Server
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="sub-web-modify前端搭建httpsgithubcomyoushandefeiyangsub-web-modify"><a href="https://github.com/youshandefeiyang/sub-web-modify">Sub-Web-Modify前端搭建</a></h1>
<p><a href="https://sub.luvsia.com">本项目</a>基于<a href="https://github.com/CareyWang/sub-web">CareyWang/sub-web</a>，重制CSS样式，解决大部分布局细节问题，增加“暗黑模式”，默认自动切换亮/暗模式（点击“太阳/月亮”图标可手动切换），增加“高级功能”点击显示/隐藏，添加短链接选择/自定义功能，增加近百条远程配置，新增<a href="https://github.com/youshandefeiyang/sub-web-api">sub-web聚合API</a>，增加上传自定义远程配置/JS进阶排序节点/JS进阶筛选节点等功能！</p>
<h2 id="更新系统并安装-node-与-yarn">更新系统并安装 Node 与 Yarn</h2>
<p>依次运行下面四行代码，若是 CentOS 系统，请自行替换下面前两行命令中的 <strong><code>apt</code></strong> 为 <strong><code>yum</code></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">apt</span> <span style="color:#a6e22e">update</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">y</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">apt</span> <span style="color:#a6e22e">install</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">y</span> <span style="color:#a6e22e">curl</span> <span style="color:#a6e22e">wget</span> <span style="color:#a6e22e">sudo</span> <span style="color:#a6e22e">nodejs</span> <span style="color:#a6e22e">git</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">apt</span> <span style="color:#a6e22e">install</span> <span style="color:#a6e22e">npm</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">npm</span> <span style="color:#a6e22e">install</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">g</span> <span style="color:#a6e22e">yarn</span>
</span></span></code></pre></div><p>命令执行完毕以后，请运行下面的代码查询 Node 与 Yarn 是否安装成功，若是成功会返回版本号。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">node</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">v</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">yarn</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">version</span>
</span></span></code></pre></div><h2 id="下载并安装-sub-web-modify">下载并安装 sub-web-modify</h2>
<p>拉取 <strong><code>sub-web-modify</code></strong> 程序，并进入 <strong><code>sub-web-modify</code></strong> 文件夹</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">git</span> <span style="color:#a6e22e">clone</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/youshandefeiyang/sub-web-modify.git
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">cd</span> <span style="color:#a6e22e">sub</span><span style="color:#f92672">-</span><span style="color:#a6e22e">web</span><span style="color:#f92672">-</span><span style="color:#a6e22e">modify</span>
</span></span></code></pre></div><p>在项目目录中安装构建依赖项，构建的过程稍微有点长</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">yarn</span> <span style="color:#a6e22e">install</span>
</span></span></code></pre></div><p>使用 webpack 运行 Web 客户端以进行本地开发。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">yarn</span> <span style="color:#a6e22e">serve</span>
</span></span></code></pre></div><p>出现下图则表示前端调试模式启动成功</p>
<p><img src="https://raw.githubusercontent.com/ventusoon/LuvSia/gh-pages/images/buildSUB/yarn-success.png" alt="yarn-success"></p>
<h4 id="这时我们浏览器访问-http服务器ip8080-应该可以进行前端-sub-web-modify-的预览了">这时，我们浏览器访问 <a href="http://%E6%9C%8D%E5%8A%A1%E5%99%A8ip:8080/">http://服务器ip:8080/</a> 应该可以进行前端 sub-web-modify 的预览了</h4>
<h4 id="记住8082端口的防火墙和安全组要开放"><em>记住8082端口的防火墙和安全组要开放</em></h4>
<h2 id="修改默认后端地址并增加远程规则">修改默认后端地址并增加远程规则</h2>
<p>找到 VPS /root/sub-web-modify/src/views/Subconverter.vue 文件用编辑器打开</p>
<p>找到 backendOptions:将你解析好的后端地址输入进去。域名为你刚才准备的后端域名，要将http改成https，并且增加/sub?的后缀。（这样选项下面就会出现自己的后端地址）</p>
<p>如果不想用后端作者默认提供的转换那可以把 const defaultBackend = 也改成你自己的域名记得加上 &ldquo;&quot;。</p>
<p>找到 remoteConfig: [ 后回车将喜欢的规则复制进去即可。</p>
<h2 id="配置完毕后打包网站">配置完毕后打包网站</h2>
<p>配置完毕以后，程序会自动更新，再次刷新前端网页，会出现刚才添加的相关规则。</p>
<p>经过上面的修改默认后端地址和原程配置的规则就修改好了。</p>
<p>至此，我们的前端调试完毕，我们现在需要打包，生成一个发布目录并将他发布了。</p>
<p>首先停止调试程序，CTRL+C ，退出当前调试，然后执行下面的命令进行打包：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">yarn</span> <span style="color:#a6e22e">build</span>
</span></span></code></pre></div><p>执行以下打包命令，在 /root/sub-web-modify 下面会生成一个 dist 目录，这个目录即为网页的发布目录。</p>
<p>将这个目录的里面的文件复制到你站点的根目录即可。</p>
<h2 id="一键搭建前端">一键搭建前端</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">cd</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">root</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">git</span> <span style="color:#a6e22e">clone</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/youshandefeiyang/sub-web-modify.git &amp;&amp; chmod -R 755 sub-web-modify &amp;&amp; cd sub-web-modify &amp;&amp; yarn install &amp;&amp; yarn build
</span></span></span></code></pre></div><h2 id="发布前端">发布前端</h2>
<p>没有安装宝塔的去宝塔官网看教程安装.</p>
<p>在宝塔面板中点击增加站点分别将前端站点增加上去，并配置好ssl证书。</p>
<p>将 /root/sub-web/dist文件夹内的所有文件复制到前端站点的根目录下即可。</p>
<p>访问该网站，前端就部署好了。</p>
<h1 id="subconverter后端搭建httpsgithubcomtindy2013subconverter"><a href="https://github.com/tindy2013/subconverter">SubConverter后端搭建</a></h1>
<h2 id="新建后端站点并进行反向代理">新建后端站点并进行反向代理</h2>
<p>在宝塔面板中新建后端的站点，同样配置好ssl并将设置站点的反向代理到25500。</p>
<p>点击新建好的后端网站的网站名在弹出来的消息盒子中点击反向代理添加发现代理。</p>
<p>反向代理配置方法方法如图：</p>
<p><img src="https://raw.githubusercontent.com/ventusoon/LuvSia/gh-pages/images/buildSUB/buildSUB.png" alt="反代"></p>
<p>设置完毕后我们开始安装后端</p>
<h2 id="搭建后端程序">搭建后端程序</h2>
<h3 id="这里我们可以用两种方法搭建后端程序第一种是用二进制文件搭建第二种为使用docker搭建我个人比较推荐docker配置简单一行命令即可搞定">这里我们可以用两种方法搭建后端程序，第一种是用二进制文件搭建，第二种为使用Docker搭建。我个人比较推荐Docker配置简单一行命令即可搞定</h3>
<h4 id="方法一-二进制文件搭建">方法一 二进制文件搭建</h4>
<h5 id="下载并解压-subconverter-二进制文件">下载并解压 subconverter 二进制文件</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">cd</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">root</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">wget</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/tindy2013/subconverter/releases/download/v0.7.2/subconverter_linux64.tar.gz
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">tar</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">zxvf</span> <span style="color:#a6e22e">subconverter_linux64</span>.<span style="color:#a6e22e">tar</span>.<span style="color:#a6e22e">gz</span>
</span></span></code></pre></div><h3 id="完成以后在-root-文件夹下会多出一个-subconverter-的文件夹这个就是我们的后端程序"><em>完成以后，在 /root 文件夹下会多出一个 subconverter 的文件夹，这个就是我们的后端程序</em></h3>
<h5 id="修改配置文件参数">修改配置文件参数</h5>
<p>现在我们需要修改后端配置文件中的一些参数</p>
<p>找到VPS文件 /root/subconverter/pref.ini ，找到如下参数进行修改</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">api_access_token</span><span style="color:#f92672">=</span><span style="color:#ae81ff">123123</span><span style="color:#a6e22e">dfsdsdfsdfsdf</span>            <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">随意设置自己知道就行</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">managed_config_prefix</span><span style="color:#f92672">=</span><span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//sub.yourdomin.com  #设置成我们刚刚解析的后端域名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">listen</span><span style="color:#f92672">=</span><span style="color:#ae81ff">127.0</span>.<span style="color:#ae81ff">0.1</span>                                <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">这里改成</span> <span style="color:#ae81ff">127.0</span>.<span style="color:#ae81ff">0.1</span> <span style="color:#a6e22e">进行反代</span>
</span></span></code></pre></div><h5 id="创建服务进程并启动">创建服务进程并启动</h5>
<p>接下来我们需要创建一个服务，让VPS每次重启或是开机自动运行后端程序</p>
<p>找到VPS目录 /etc/systemd/system，创建一个名为 sub.service 的文件</p>
<p>打开文件，贴入以下内容，保存。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span>[<span style="color:#a6e22e">Unit</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Description</span><span style="color:#f92672">=</span><span style="color:#a6e22e">A</span> <span style="color:#a6e22e">API</span> <span style="color:#a6e22e">For</span> <span style="color:#a6e22e">Subscription</span> <span style="color:#a6e22e">Convert</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">After</span><span style="color:#f92672">=</span><span style="color:#a6e22e">network</span>.<span style="color:#a6e22e">target</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">Service</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Type</span><span style="color:#f92672">=</span><span style="color:#a6e22e">simple</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">/root/subconverter/subconverter</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WorkingDirectory</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">/root/subconverter</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Restart</span><span style="color:#f92672">=</span><span style="color:#a6e22e">always</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">RestartSec</span><span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">Install</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WantedBy</span><span style="color:#f92672">=</span><span style="color:#a6e22e">multi</span><span style="color:#f92672">-</span><span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">target</span>
</span></span></code></pre></div><h5 id="检查运行状态以及设置开机自启">检查运行状态以及设置开机自启</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">systemctl</span> <span style="color:#a6e22e">daemon</span><span style="color:#f92672">-</span><span style="color:#a6e22e">reload</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">systemctl</span> <span style="color:#a6e22e">start</span> <span style="color:#a6e22e">sub</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">systemctl</span> <span style="color:#a6e22e">enable</span> <span style="color:#a6e22e">sub</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">systemctl</span> <span style="color:#a6e22e">status</span> <span style="color:#a6e22e">sub</span>
</span></span></code></pre></div><h3 id="到这里后端也就搭建完毕了我们现在可以在浏览器里面访问我们的后端了访问后端域名后端搭建成功"><em>到这里，后端也就搭建完毕了，我们现在可以在浏览器里面访问我们的后端了，访问后端域名后端搭建成功！</em></h3>
<h4 id="方法二-docker容器搭建">方法二 Docker容器搭建</h4>
<p>如果服务器安装了Docker可以使用命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">docker</span> <span style="color:#a6e22e">run</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">d</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">restart</span><span style="color:#f92672">=</span><span style="color:#a6e22e">always</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">p</span> <span style="color:#ae81ff">25500</span><span style="color:#f92672">:</span><span style="color:#ae81ff">25500</span> <span style="color:#a6e22e">tindy2013</span><span style="color:#f92672">/</span><span style="color:#a6e22e">subconverter</span><span style="color:#f92672">:</span><span style="color:#a6e22e">latest</span>
</span></span></code></pre></div><p>然后再用下面的命令确认一下状态</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#a6e22e">curl</span> <span style="color:#a6e22e">http</span><span style="color:#f92672">:</span><span style="color:#75715e">//localhost:25500/version
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">curl</span> <span style="color:#a6e22e">http</span><span style="color:#f92672">:</span><span style="color:#75715e">//localhost:25500/version
</span></span></span></code></pre></div><p>如果输出当前 subconverter 容器版本几位搭建成功。</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://luvsia.com/js/toc.js'></script>
<link rel="stylesheet" href='https://luvsia.com/css/toc.css' />

<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://luvsia.com/css/gitalk.css'>
<script src='https://luvsia.com/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: '84d6a9f5c7a8475f9e7b',
    clientSecret: 'e45ce5415105ad06c1fe461af71a61d0d46761f3',
    repo: 'LuvSia',
    owner: 'ventusoon',
    admin: ['ventusoon'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://luvsia.com">
      <svg height="30" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="30">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>

    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-center mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">© 2023 Ventus 丨 Welcome to My <a href='https://luvsia.com'>Blog</a></li>
                
      &emsp;&emsp;
      
      <script>
      function siteTime() {
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var startYear = 2021;
        var startMonth = 12;
        var startDate = 31;
        var startHour = 00;
        var startMinute = 00;
        var startSecond = 00;
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                    minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                    diffMinutes * minutes) / seconds);
        if (startYear == todayYear) {
            
            document.getElementById("sitetime").innerHTML = " Running  " + diffDays + " d " + diffHours +
                " h " + diffMinutes + " m " + diffSeconds + " s";
        } else {
            
            document.getElementById("sitetime").innerHTML = " Running  " + diffYears + " y " + diffDays +
                " d " + diffHours + " h " + diffMinutes + " m " + diffSeconds + " s";
        }
    }
    setInterval(siteTime, 1000);</script>
      <span id="sitetime">Reloading... </span>
      
      
    </ul>
  </div>
  
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>
  </div>
  <div id="aplayerContent">
    
  
<div id="aplayer"></div>
<link rel="stylesheet" href="/css/APlayer.min.css">
<script src="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script>var ap = new APlayer({
      element: document.getElementById('aplayer'),
      narrow: false,
      fixed: true,
      autoplay: true,
      mutex: true,
      lrcType: 3,
  });
    $.ajax({
    url: 'https://api.i-meto.com/meting/api?server=netease&type=playlist&id=6690262418',
    success: function (list) {
    ap.list.add(list);
    }
  });
</script>
  </div> 
</body>

<script type="application/javascript" src="https://luvsia.com/js/github-style.js"></script>




</html>